# 个人数字书架 Web 应用（Booklist）PRD

## 1. 背景与目标

### 1.1 背景
用户希望在浏览器中管理个人阅读清单：添加书籍、记录阅读状态与评分，并能快速筛选查看。应用不依赖后端服务，数据需在本地持久化，刷新/重开页面不丢失。

### 1.2 产品目标
- 以**单页 Web 应用（SPA）**形式提供“个人数字书架”体验
- 覆盖**书籍增删改查**、**状态切换**、**筛选**、**统计**等核心场景
- 所有数据使用 **localStorage** 持久化
- 适配桌面与移动端，界面现代、轻量、易用

### 1.3 非目标（本期不做）
- 不做账号体系、云同步、多人共享
- 不做服务端/数据库
- 不做复杂检索（如全文搜索、ISBN 拉取外部数据）
- 不做导入导出（可在未来扩展）

## 2. 术语定义
- **书籍**：用户在书架中维护的一条记录
- **阅读状态**：`想读 / 在读 / 已读`
- **评分**：0–5 星；0 表示未评分

## 3. 用户与使用场景

### 3.1 目标用户
个人用户（单设备/单浏览器）希望管理自己的阅读计划与进度。

### 3.2 核心使用场景
- 新增一本想读的书
- 将“想读”改为“在读”，读完后改为“已读”
- 给已读书籍打分
- 只看“在读”或只看“高评分（4+）”
- 通过顶部统计快速了解阅读情况

## 4. 信息架构与页面结构

### 4.1 页面结构（单页）
- **顶部区域**
  - 应用标题/简介
  - 统计信息：总藏书数、已读数、在读数（可选：想读数）
- **筛选器区域**
  - 筛选按钮：全部、已读、在读、想读、高评分（4+）
- **内容区域**
  - 书籍卡片网格列表（响应式）
- **侧/下方区域（同页）**
  - 书籍表单：用于新增/编辑

## 5. 核心功能需求

## 5.1 书籍管理

### 5.1.1 添加书籍
- **入口**：书籍表单
- **字段**
  - 书名（必填）
  - 作者（必填）
  - 封面 URL（可选）
  - 阅读状态（必选：想读/在读/已读；默认：想读）
  - 评分（0–5；默认：0）
- **校验**
  - 书名、作者不能为空（空白字符视为无效）
  - 评分必须为 0–5 的整数（或通过 UI 约束避免非法输入）
  - 封面 URL 若填写，应可作为 `img.src` 使用；加载失败时展示占位图
- **提交结果**
  - 成功：保存到 localStorage，刷新列表与统计，显示成功提示，清空表单回到“新增模式”
  - 失败：表单内提示错误，不保存

### 5.1.2 编辑书籍
- **入口**：书籍卡片上的“编辑”按钮
- **行为**
  - 点击后将该书籍信息**回填**到表单
  - 表单进入“编辑模式”：提交按钮文案变为“保存修改”（可选增加“取消编辑”按钮）
- **提交结果**
  - 成功：更新 localStorage 中对应记录，刷新列表与统计，显示成功提示，退出编辑模式

### 5.1.3 删除书籍
- **入口**：书籍卡片上的“删除”按钮
- **行为**
  - 点击弹出确认对话框（浏览器 `confirm()` 或自定义弹窗均可）
  - 确认后删除，取消则不操作
- **提交结果**
  - 成功：从 localStorage 删除对应记录，刷新列表与统计

### 5.1.4 状态切换（快捷）
- **入口**：书籍卡片上的“切换状态”按钮
- **规则**：按固定顺序循环切换
  - `想读 → 在读 → 已读 → 想读`
- **提交结果**
  - 立即更新 localStorage 与 UI（含状态标签颜色与文案）
  - 状态变化应有平滑过渡动画

## 5.2 书架展示

### 5.2.1 书籍卡片内容
每本书以卡片形式展示，包含：
- 封面：优先使用用户输入的图片 URL；无/失败使用占位图标（Font Awesome）
- 书名：突出显示
- 作者：普通文字
- 状态标签：不同状态不同颜色
- 评分展示：
  - 0 星显示“未评分”
  - 1–5 用星级（Font Awesome）呈现
- 操作按钮：编辑、删除、切换状态

### 5.2.2 响应式布局
使用 CSS Grid 或 Flexbox：
- 桌面端：每行 3–4 本（随屏宽自适应）
- 移动端：每行 1 本

## 5.3 筛选与统计

### 5.3.1 筛选器
筛选按钮（单选）：
- 全部
- 已读
- 在读
- 想读
- 高评分（4+）：`rating >= 4`

筛选逻辑：
- 切换筛选后，书籍列表立即更新
- 统计信息始终展示**全量数据统计**（不随筛选变化），除非产品决定改为“当前筛选统计”（本期默认全量）

### 5.3.2 实时统计
顶部展示：
- 总藏书数
- 已读数
- 在读数
（可选：想读数）

统计应在以下事件后即时更新：
- 新增/编辑/删除
- 快捷切换状态
- 页面初始化读取 localStorage

## 5.4 数据持久化
- 使用 `localStorage` 保存书籍数组数据
- 页面刷新/重开后，从 `localStorage` 读取并渲染
- 若 `localStorage` 无数据或数据损坏：
  - 无数据：显示空状态提示（“暂无书籍，去添加一本吧”）
  - 数据损坏：可回退为空数组（并可在控制台告警）

## 6. 数据结构与存储设计

### 6.1 Book 对象结构

```javascript
{
  id: number,           // 唯一标识符，自动递增
  title: string,        // 书名，必填
  author: string,       // 作者，必填
  cover: string,        // 封面图片URL，可选
  status: string,       // 阅读状态：'想读'/'在读'/'已读'
  rating: number,       // 评分：0-5，0表示未评分
  addedDate: string     // 添加日期（可选，用于未来扩展）
}
```

### 6.2 localStorage 设计（建议）
- **key**：`booklist.books`
- **value**：`JSON.stringify(Book[])`

### 6.3 ID 生成规则（建议）
两种可选方案（二选一即可）：
- **方案 A：自增计数器**：`booklist.nextId` 存储下一个可用 id
- **方案 B：时间戳**：`Date.now()` 作为 id（无需额外 key，但需保证不重复）

本 PRD 默认采用“自动递增”的语义，实际实现可选 A/B。

## 7. 交互与视觉规范

## 7.1 视觉设计
- **主色调**：深蓝紫色渐变 `#6a11cb → #2575fc`
- **状态颜色**
  - 已读：`#28a745`
  - 在读：`#17a2b8`
  - 想读：`#ffc107`
- **背景**：`#f5f7fa`
- **卡片**：`#ffffff`
- **字体**：系统默认字体栈
- **圆角**
  - 卡片：10px
  - 按钮：8px
- **阴影**
  - 默认：轻微阴影
  - 悬停：阴影加深

## 7.2 交互设计
- **卡片悬停**：轻微上浮 + 阴影加深
- **按钮悬停**：颜色变化 + 轻微放大
- **状态变化**：平滑过渡动画（颜色/标签/按钮状态）
- **表单提交**：成功提示（toast/提示条/文本提示均可）

## 7.3 图标与资源
- 使用 Font Awesome 图标（CDN 引入）
  - 星级、编辑、删除、封面占位等

## 8. 状态与异常处理

### 8.1 空状态
当无书籍时：
- 列表区域显示空状态文案与引导（如“点击下方表单添加第一本书”）

### 8.2 封面加载失败
- `img` 加载失败时切换为占位图标或默认图片

### 8.3 误操作保护
- 删除必须二次确认
- 编辑模式建议提供“取消编辑”

## 9. 验收标准（Acceptance Criteria）
- 能新增书籍（必填校验生效），刷新页面数据不丢失
- 每本书以卡片展示：封面/书名/作者/状态/评分/操作按钮齐全
- 编辑可回填表单并成功保存修改
- 删除会弹确认框，确认后删除成功
- 状态切换按 `想读→在读→已读→想读` 循环，且持久化
- 筛选按钮可正确过滤：全部/已读/在读/想读/高评分（4+）
- 顶部统计始终准确：总数、已读数、在读数（以及实现时可选的想读数）
- 响应式布局符合要求：桌面 3–4 列，移动 1 列
- 使用现代 CSS（Grid/Flex、CSS 变量等），并引入 Font Awesome CDN

## 10. 技术栈要求（实现约束）
- HTML5 + CSS3 + 纯 JavaScript（不使用框架）
- 单页应用（可用简单路由或无路由，仅单页面渲染）
- 本地数据：localStorage
- 响应式适配桌面/移动端

